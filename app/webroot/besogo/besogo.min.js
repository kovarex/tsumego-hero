function U(c){var b=0;return function(){return b<c.length?{done:!1,value:c[b++]}:{done:!0}}}
(function(){function c(k,a,d){k.getAttribute("tabindex")||k.setAttribute("tabindex","0");k.addEventListener("keydown",function(e){e=e||window.event;switch(e.keyCode){case 33:a.la(10);break;case 34:a.nextNode(10);break;case 35:a.nextNode(-1);break;case 36:a.la(-1);break;case 37:e.shiftKey?a.Oc():a.la(1);break;case 38:a.nextSibling(-1);break;case 39:a.nextNode(1);break;case 40:a.nextSibling(1);break;case 46:a.xb();break;case 16:a.Hb()||(a.Vb(!0),d.Qb(a.h()))}33<=e.keyCode&&40>=e.keyCode&&e.preventDefault()});
k.addEventListener("keyup",function(e){e=e||window.event;switch(e.keyCode){case 16:a.Vb(!1),d.Qb(a.h())}})}function b(k,a){k.addEventListener("wheel",function(d){d=d||window.event;0<d.deltaY?(a.nextNode(1),d.preventDefault()):0>d.deltaY&&(a.la(1),d.preventDefault())})}function f(k,a){try{var d=m.Fa(k)}catch(e){return}m.Ca(d,a)}function h(k,a,d){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(f(e.responseText,a),q(a,d))};e.overrideMimeType("text/plain");
e.open("GET",k,!0);e.send()}function q(k,a){function d(r,w){r=r.split(/\D+/);for(var n=0;n<r.length;n++)r[n]&&(w?k.h().children.length&&(k.nextNode(1),k.nextSibling(r[n]-1)):k.nextNode(+r[n]))}a=a.split(/[Nn]+/);for(var e=0;e<a.length;e++){var g=a[e].split(/[Bb]+/);d(g[0],!1);for(var l=1;l<g.length;l++)d(g[l],!0)}}var m=window.pc=window.pc||{};m.VERSION="0.0.2-alpha";m.create=function(k,a){function d(t,A){A&&t>A?(k.style["flex-direction"]="row",w.style.height=A+"px",w.style.width=A+"px",n&&(n.style.height=
A+"px",n.style.width=t-A+"px")):(k.style["flex-direction"]="column",w.style.height=t+"px",w.style.width=t+"px",n&&(A&&(n.style.height=A-t+"px"),n.style.width=t+"px"))}function e(t,A){var I=document.createElement("div");t&&(I.className=t);A=A||k;A.appendChild(I);return I}var g={control:m.Fc,J:m.Ec,R:m.Ib,oa:m.Ib,Fd:m.Ic,file:m.Gc};var l=k.textContent||k.innerText||"";k.className+=" besogo-container";a=a||{};a.size=m.gb(a.size||19);a.H=a.H||"none";a.R=a.R||"auto";a.oa=a.oa||"auto";""===a.P&&(a.P=[]);
a.P=a.P||"tree+control";"string"===typeof a.P&&(a.P=a.P.split("+"));a.ka=a.ka||"tool2";"string"===typeof a.ka&&(a.ka=a.ka.split("+"));a.path=a.path||"";void 0===a.wa?a.wa="auto":"off"===a.wa&&(a.wa=!1);var r=m.ia(a.size.x,a.size.y);k.kd=r;r.Ga(a.R);r.Ga(a.oa);r.Uc(a.H);a.Ad?(r.sb=!0,r.Wa=a.wa):r.Wa=a.wa&&"auto"!==a.wa;if(a.lb){l=!1;try{new URL(a.lb),l=!0}catch(t){}try{l?h(a.lb,r,a.path):(f(a.lb,r),q(r,a.path))}catch(t){console.error(t)}}else l.match(/\s*\(\s*;/)&&(f(l,r),q(r,a.path));for("number"!==
typeof a.fc&&"string"!==typeof a.fc||r.Wb(+a.fc);k.firstChild;)k.removeChild(k.firstChild);var w=e("besogo-board");l=m.Dc(w,r);a.ud||c(k,r,l);a.wd||b(w,r);if(0<a.P.length){var n=e("besogo-panels");for(l=0;l<a.P.length;l++){var y=a.P[l];if(g[y])g[y](e("besogo-"+y,n),r)}n.firstChild||(k.removeChild(n),n=!1)}if(0<a.ka.length){n=e("besogo-bottom-panels");for(l=0;l<a.ka.length;l++)if(y=a.ka[l],g[y])g[y](e("besogo-"+y,n),r);n.firstChild||(k.removeChild(n),n=!1)}a.resize=a.resize||"auto";"auto"===a.resize?
(r=function(){var t=window.innerHeight,A=parseFloat(getComputedStyle(k.parentElement).width),I=+(a.td||-1),D=a.xd||"auto",C=+(a.zd||200)/100,J=+(a.sd||200)/100,u=+(a.Kc||350),E=+(a.Jc||400),F=+(a.Ed||600);A=0<I&&I<A?I:A;"portrait"!==D&&"landscape"!==D&&(D=A<F||"view"===D&&A<t?"portrait":"landscape");if("portrait"===D){if(!isNaN(C)){var K=C*A;n&&(K=K-A<E?A+E:K)}}else"landscape"===D&&(K=n?isNaN(J)?t:A/J:A,n&&(K=A<K+u?A-u:K));d(A,K);k.style.width=A+"px"},window.addEventListener("resize",r),r()):"fixed"===
a.resize?d(k.clientWidth,k.clientHeight):"fill"===a.resize&&(r=function(){var t=parseFloat(getComputedStyle(k.parentElement).height),A=parseFloat(getComputedStyle(k.parentElement).width),I=+(a.Kc||350),D=+(a.Jc||300),C=0,J=0;A>=t?(k.style["flex-direction"]="row",n&&(C=A-t>=I?A-t:I),n.style.height=t+"px",n.style.width=C+"px",w.style.height=t+"px",w.style.width=A-C+"px"):(k.style["flex-direction"]="column",n&&(J=t-A>=D?t-A:D),n.style.height=J+"px",n.style.width=A+"px",w.style.height=t-J+"px",w.style.width=
A+"px")},window.addEventListener("resize",r),r())};m.gb=function(k){var a;k=(k+"").replace(/\s/g,"");if(a=k.match(/^(\d+):(\d+)$/)){var d=+a[1];k=+a[2]}else k.match(/^\d+$/)?(d=+k,k=+k):d=k=19;if(52<d||1>d||52<k||1>k)d=k=19;return{x:d,y:k}};m.jd=function(){function k(r,w){return-1!==r.className.split(" ").indexOf(w)}var a=document.getElementsByTagName("div"),d=[],e;for(e=0;e<a.length;e++)(k(a[e],"besogo-editor")||k(a[e],"besogo-viewer")||k(a[e],"besogo-diagram"))&&!k(a[e],"besogo-container")&&d.push(a[e]);
for(var g=0;g<d.length;g++){a={};k(d[g],"besogo-editor")?(a.P=["control","comment","tool","tree","file"],a.R="auto",a.oa="auto"):k(d[g],"besogo-viewer")?(a.P=["control","comment"],a.R="navOnly",a.oa="navOnly"):k(d[g],"besogo-diagram")&&(a.P=[],a.R="navOnly",a.oa="navOnly");e=d[g].attributes;for(var l=0;l<e.length;l++)a[e[l].name]=e[l].value;m.create(d[g],a)}}})();
besogo.Dc=function(c,b){function f(){S=!0;O=[];J.removeChild(K);c.removeEventListener("touchstart",f)}function h(x){var z="";I=("none"===x?0:75)+6;var v=2*I+88*D;var H=2*I+88*C;J=besogo.g("svg",{width:"100%",height:"100%",viewBox:"0 0 "+v+" "+H});J.appendChild(besogo.g("rect",{width:v,height:H,"class":"besogo-svg-board"}));J.appendChild(besogo.g("rect",{width:88*(D-1),height:88*(C-1),x:t(1),y:t(1),"class":"besogo-svg-lines"}));for(v=2;v<=C-1;v++)z+="M"+t(1)+","+t(v)+"h"+88*(D-1);for(v=2;v<=D-1;v++)z+=
"M"+t(v)+","+t(1)+"v"+88*(C-1);J.appendChild(besogo.g("path",{d:z,"class":"besogo-svg-lines"}));k();"none"!==x&&m(x);u=besogo.g("g");E=besogo.g("g");F=besogo.g("g");J.appendChild(u);J.appendChild(E);J.appendChild(F);S||(K=besogo.g("g"),J.appendChild(K));for(x=1;x<=D;x++)for(z=1;z<=C;z++)v=besogo.g("rect",{x:t(x)-44,y:t(z)-44,width:88,height:88,opacity:0}),v.addEventListener("click",a(x,z)),S||(v.addEventListener("mouseover",d(x,z)),v.addEventListener("mouseout",g(x,z))),J.appendChild(v);if(b.sb)for(x=
besogo.rb*besogo.tb,T=[],z=1;z<=D;z++)for(v=1;v<=C;v++)T[A(z,v)]=Math.floor(Math.random()*x)}function q(x){var z=besogo.g("g"),v,H,G;if(b.Wa){var p=besogo.Xc();z.appendChild(p)}for(v=1;v<=D;v++)for(H=1;H<=C;H++)if(G=x.I(v,H)){var B=t(v);var L=t(H);b.sb?z.appendChild(besogo.Pc(B,L,G,T[A(v,H)])):z.appendChild(besogo.U(B,L,G));b.Wa&&(p.appendChild(besogo.Yb(B-2,L-4)),p.appendChild(besogo.Yb(B+2,L+4)))}(p=x.bb())&&z.appendChild(besogo.Ra(t(p.x),t(p.y),"black",2));J.replaceChild(z,u);u=z;l(x);if(reviewEnabled2){z=
besogo.g("g");for(p=0;p<x.children.length;++p)v=x.children[p],v=besogo.Xb(t(v.move.x),t(v.move.y),v.ab(),15),z.appendChild(v);if(x.i)for(p=0;p<x.i.length;++p)v=x.i[p],v=besogo.Xb(t(v.move.x),t(v.move.y),v.target.ab(),8),z.appendChild(v);for(p=0;p<x.children.length;++p)r(z,x.children[p],x.children[p].move);for(p=0;p<x.i.length;++p)r(z,x.i[p].target,x.i[p].move);J.replaceChild(z,F);F=z}y(x)}function m(x){function z(L,M,Q){L=besogo.g("text",{x:L,y:M,dy:".65ex","font-size":32,"text-anchor":"middle","font-family":"Helvetica, Arial, sans-serif",
fill:"black"});L.appendChild(document.createTextNode(Q));J.appendChild(L)}var v=besogo.H[x](D,C),H=v.x,G=v.Ua||v.x;x=v.y;v=v.Va||v.y;for(var p,B=1;B<=D;B++)p=t(B),z(p,t(1)-85,H[B]),z(p,t(C)+85,G[B]);for(G=1;G<=C;G++)H=t(G),z(t(1)-85,H,x[G]),z(t(D)+85,H,v[G])}function k(){function x(G,p){z+="M"+t(G)+","+t(p)+"l0,0"}var z="";if(D%2&&C%2){var v=(D-1)/2+1;var H=(C-1)/2+1;x(v,H);17<=D&&17<=C&&(x(4,H),x(D-3,H),x(v,4),x(v,C-3))}11<=D&&11<=C?(x(4,4),x(4,C-3),x(D-3,4),x(D-3,C-3)):8<=D&&8<=C&&(x(3,3),x(3,C-
2),x(D-2,3),x(D-2,C-2));z&&J.appendChild(besogo.g("path",{d:z,"stroke-linecap":"round","class":"besogo-svg-hoshi"}))}function a(x,z){return function(v){b.click(x,z,v.ctrlKey,v.shiftKey);S||d(x,z)();reviewEnabled2||setTimeout(function(){isMutable&&b.nextNode(1)},360)}}function d(x,z){return function(){R=[];R.x=x;R.y=z;e()}}function e(){null!=R&&(element=O[A(R.x,R.y)])&&element.setAttribute("visibility","visible")}function g(x,z){return function(){R=null;(element=O[A(x,z)])&&element.setAttribute("visibility",
"hidden")}}function l(x){var z=besogo.g("g"),v=x.move,H=b.zc();N=[];for(var G=1;G<=D;G++)for(var p=1;p<=C;p++)if(mark=x.Ma(G,p)){var B=t(G),L=t(p),M=x.I(G,p),Q=-1===M?"white":"black";v&&v.x===G&&v.y===p?Q=w(H,x,G,p)?besogo.mc:besogo.ic:w(H,x,G,p)&&(Q=besogo.RED);var P=null;if("number"===typeof mark)switch(mark){case 1:P=besogo.Ha(B,L,Q);break;case 2:P=besogo.Ra(B,L,Q);break;case 3:P=besogo.Sa(B,L,Q);break;case 4:P=besogo.Ia(B,L,Q);break;case 5:P=besogo.mb(B,L,Q)}else M||(P=besogo.g("rect",{x:B-44,
y:L-44,height:88,width:88,opacity:.85,stroke:"none","class":"besogo-svg-board besogo-svg-backer"}),z.appendChild(P)),P=besogo.Ja(B,L,Q,mark);z.appendChild(P);N[A(G,p)]=P}v&&0!==v.x&&0!==v.y&&!N[A(v.x,v.y)]&&(w(H,x,v.x,v.y),x.ha&&(v=x.ha.xc(x)),P=besogo.Ha(t(v.x),t(v.y),x.Ea()?"black":"white",20,4),z.appendChild(P),N[A(v.x,v.y)]=P);J.replaceChild(z,E);E=z}function r(x,z,v){0!=z.status.l.type&&(z=besogo.Ja(t(v.x),t(v.y+.25),"black",z.status.s(),25),x.appendChild(z))}function w(x,z,v,H){var G,p;for(G=
0;G<x.length;G++)if(x[G]!==z&&(p=x[G].move)&&p.x===v&&p.y===H)return!0;return!1}function n(x,z,v,H){var G=-1===H?"white":"black";switch(b.qa()){case "auto":return besogo.U(z,v,x.ra());case "addB":if(H)return besogo.Ia(z,v,besogo.RED);x=besogo.g("g");x.appendChild(besogo.U(z,v,b.Hb()?1:-1));x.appendChild(besogo.nb(z,v,besogo.RED));return x;case "circle":return besogo.Ha(z,v,G);case "square":return besogo.Ra(z,v,G);case "triangle":return besogo.Sa(z,v,G);case "cross":return besogo.Ia(z,v,G);case "block":return besogo.mb(z,
v,G);case "label":return besogo.Ja(z,v,G,b.Cb())}return null}function y(x){if(!S){var z=besogo.g("g");O=[];z.setAttribute("opacity","0.35");if("navOnly"===b.qa()){x=x.children;for(var v=0;v<x.length;v++){var H=x[v].move;if(H&&0!==H.x){var G=t(H.x),p=t(H.y);G=besogo.U(G,p,H.color);G.setAttribute("visibility","hidden");z.appendChild(G);O[A(H.x,H.y)]=G}}}else for(v=1;v<=D;v++)for(var B=1;B<=C;B++)if(G=t(v),p=t(B),H=x.I(v,B),G=n(x,G,p,H))G.setAttribute("visibility","hidden"),z.appendChild(G),O[A(v,B)]=
G;J.replaceChild(z,K);K=z;e()}}function t(x){return I+44+88*(x-1)}function A(x,z){return(x-1)*C+(z-1)}var I,D=b.h().getSize().x,C=b.h().getSize().y,J,u,E,F,K,N,O,T,R=null,S=!1;h(b.zb());c.appendChild(J);b.addListener(function(x){var z=b.h(),v=z.getSize(),H=!1,G=J;if(v.x!==D||v.y!==C||x.H)D=v.x,C=v.y,h(x.H||b.zb()),c.replaceChild(J,G),H=!0;H||x.B||x.N?q(z):x.Kb||x.G?(l(z),y(z)):(x.R||x.label)&&y(z)});q(b.h());c.addEventListener("touchstart",f);return{Qb:y}};
besogo.Ec=function(c,b){function f(p){p.relatedTarget?p.relatedTarget.focus():this.blur()}function h(p,B,L,M,Q){var P=document.createElement("input");P.type=p;P.id=L;M&&(P.name=M);P.onclick=Q;B.appendChild(P);p=document.createElement("label");p.textContent=L;p.htmlFor=L;B.appendChild(p);return P}function q(p,B,L,M){return h("radio",p,B,L,M)}function m(p,B,L){return h("checkbox",p,B,null,L)}function k(p,B){B||document.activeElement==p&&document.getElementById("target").focus();p.disabled=!B}function a(p,
B,L,M){M=void 0===M?null:M;p=p.insertRow(-1);var Q=p.insertCell(0);B=q(Q,B,"status",function(){b.h().X(besogo.v(L));d();e();b.sa({G:!0})});p=p.insertCell(-1);M&&p.appendChild(M);return B}function d(){var p=!b.h().T()&&0!=b.j().M;k(E,p);k(F,p);k(K,p);k(N,p&&b.h().m&&2==b.h().m.l.type);k(O,p&&b.h().m&&2==b.h().m.l.type);k(T,p);k(R,p&&b.h().m&&3==b.h().m.l.type);k(S,p)}function e(){y.textContent="Status: "+b.h().status.Qa()}function g(){var p=b.j().M;z.checked=1==p;k(z,0!=p);v.checked=2==p;k(v,0!=p)}
function l(p){e();d();b.h().status&&0!=b.h().status.l.type?1==b.h().status.l.type?F.checked=!0:2==b.h().status.l.type?(K.checked=!0,N.value=b.h().status.l.Bb(),O.value=b.h().status.l.sc()):3==b.h().status.l.type?(T.checked=!0,R.checked=b.h().status.l.ca):4==b.h().status.l.type&&(S.checked=!0):E.checked=!0;g();if(p.B)p=b.h().J||"",p=document.createTextNode(p),D.replaceChild(p,n.C),n.C=p,A.style.display=b.h()===b.j()&&A.firstChild&&"none"===I.style.display?"table":"none",C.style.display="none",D.style.display=
"block";else if(void 0!==p.J){var B=document.createTextNode(p.J);D.replaceChild(B,n.C);n.C=B;C.value=p.J}w();p=b.j().Ab();x.disabled=0==b.j().M||0==p;x.value="Jump to branch without status ("+p+")";J.checked=0!=b.h().j().M}function r(p,B,L){return q(p,B,"goal",function(){b.h().j().Ub(L);b.sa({G:!0,B:!0,N:!0})})}function w(){var p=b.h();u.disabled=0!=b.j().M||p.children.length||p.i.length;u.value=p.K?"Make incorrect":"Make correct"}var n={},y=null,t=null,A=document.createElement("table"),I=document.createElement("table"),
D=document.createElement("div"),C=document.createElement("textarea"),J=null,u=function(){var p=document.createElement("input");p.type="button";p.value="Incorrect";p.title="Change incorrect state";p.addEventListener("focus",f);p.onclick=function(){b.h().Vc(!b.h().S,b)};return p}(),E=null,F=null,K=null,N=null,O=null,T=null,R=null,S=null,x=function(){var p=document.createElement("input");p.type="button";p.value="Jump to branch without status";p.title="bla bla";p.addEventListener("focus",f);p.onclick=
function(){var B=b.j().Db();B&&b.jb(B)};return p}(),z=null,v=null;y=function(){var p=document.createElement("label");p.style.fontSize="x-large";return p}();t=function(){var p=document.createElement("table");E=a(p,"none",0);F=a(p,"dead",1);var B=document.createElement("span"),L=document.createElement("label");L.textContent="Approaches: ";B.appendChild(L);O=document.createElement("input");O.type="text";O.oninput=function(M){if(b.h().m&&2==b.h().m.l.type){var Q=besogo.v(2);Q.W(Number(M.target.value),
b.h().m.l.o);b.h().X(Q);e()}};B.appendChild(O);L=document.createElement("label");L.textContent="Threats: ";B.appendChild(L);N=document.createElement("input");N.type="text";N.oninput=function(M){b.h().m&&2==b.h().m.l.type&&(M=besogo.$("KO"+M.target.value),M.W(Number(O.value),M.l.o),b.h().X(M),e())};B.appendChild(N);K=a(p,"ko",2,B);B=document.createElement("span");R=m(B,"sente",function(M){b.h().X(besogo.$("SEKI"+(M.target.checked?"+":"")));e()});T=a(p,"seki",3,B);S=a(p,"alive",4);return p}();var H=
document.createElement("div");c.appendChild(H);var G=document.createElement("span");J=m(G,"Correct controlled by status",function(p){b.h().j().Ub(p.target.checked?1:0);g();w();d();besogo.fa(b.h().j());b.sa({G:!0,B:!0,N:!0})});J.type="checkbox";G.appendChild(u);H.appendChild(G);H.appendChild(function(){var p=document.createElement("table"),B=p.insertRow(-1);p.appendChild(B);var L=B.insertCell(-1),M=document.createElement("label");M.textContent="Goal: ";M.style.fontSize="x-large";L.appendChild(M);L=
B.insertCell(-1);z=r(L,"kill",1);B=p.insertRow(-1);B.insertCell(-1);L=B.insertCell(-1);v=r(L,"live",2);return p}());H.appendChild(y);H.appendChild(t);H.appendChild(x);c.appendChild(function(){var p=document.createElement("input");p.type="button";p.value="Comment";p.title="Edit comment";p.onclick=function(){"none"===C.style.display?(D.style.display="none",A.style.display="none",C.value=b.h().J,C.style.display="block"):(C.style.display="none",D.style.display="block")};return p}());n.jc=document.createTextNode("");
c.appendChild(D);D.appendChild(n.jc);c.appendChild(C);C.onblur=function(){b.Tc(C.value)};C.addEventListener("keydown",function(p){p=p||window.event;p.stopPropagation()});b.addListener(l);l({B:!0});I.style.display="none"};
besogo.Fc=function(c,b){function f(k){function a(d,e){for(var g=0;g<d.length;g++)d[g].setAttribute("fill",e)}if(k.B||k.G)k=b.h(),k.parent?(a(h,"black"),1<k.parent.children.length?a(m,"black"):a(m,besogo.xa)):(a(h,besogo.xa),a(m,besogo.xa)),k.children.length?a(q,"black"):a(q,besogo.xa)}var h=[],q=[],m=[];(function(){function k(a,d,e){var g=document.createElement("button"),l=besogo.g("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100"});d=besogo.g("polygon",{points:d,stroke:"none",fill:"black"});
g.title=a;g.onclick=e;g.appendChild(l);l.appendChild(d);c.appendChild(g);return d}h.push(k("First node","5,10 5,90 25,90 25,50 95,90 95,10 25,50 25,10",function(){b.la(-1)}));h.push(k("Previous node","85,10 85,90 15,50",function(){b.la(1)}));q.push(k("Next node","15,10 15,90 85,50",function(){b.nextNode(1)}));q.push(k("Last node","95,10 95,90 75,90 75,50 5,90 5,10 75,50 75,10",function(){b.nextNode(-1)}))})();b.addListener(f);f({B:!0,Zc:b.Fb()})};
(function(){function c(f){return"ABCDEFGHJKLMNOPQRSTUVWXYZ".charAt((f-1)%25)}function b(f){var h="";20<=f?h="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d".charAt(f/10-1)+"\u5341":10<=f&&(h="\u5341");f%10&&(h+="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d".charAt((f-1)%10));return h}besogo.H={};besogo.H.vd=function(){return!1};besogo.H.Gd=function(f,h){var q={x:[],y:[]},m;for(m=1;m<=f;m++)q.x[m]=c(m);for(m=1;m<=h;m++)q.y[m]=h-m+1+"";return q};besogo.H.numeric=function(f,h){var q=
{x:[],y:[]},m;for(m=1;m<=f;m++)q.x[m]=m+"";for(m=1;m<=h;m++)q.y[m]=m+"";return q};besogo.H.yd=function(f,h){var q={x:[],Ua:[],y:[],Va:[]},m;for(m=1;m<=f/2;m++)q.x[m]="a"+m,q.x[f-m+1]="b"+m,q.Ua[m]="d"+m,q.Ua[f-m+1]="c"+m;f%2&&(m=Math.ceil(f/2),q.x[m]="a",q.Ua[m]="c");for(m=1;m<=h/2;m++)q.y[m]="a"+m,q.y[h-m+1]="d"+m,q.Va[m]="b"+m,q.Va[h-m+1]="c"+m;h%2&&(m=Math.ceil(h/2),q.y[m]="d",q.Va[m]="b");return q};besogo.H.ld=function(f,h){var q={x:[],y:[]},m;for(m=1;m<=f;m++)q.x[m]=m<f/2+1?c(m):f-m+1+"";for(m=
1;m<=h;m++)q.y[m]=h-m+1+"",q.y[m]=m>h/2?c(h-m+1):m+"";return q};besogo.H.md=function(f,h){var q={x:[],y:[]},m;for(m=1;m<=f;m++)q.x[m]=m<f/2+1?b(m):f-m+1+"";for(m=1;m<=h;m++)q.y[m]=h-m+1+"",q.y[m]=m>h/2?b(h-m+1):m+"";return q};besogo.H.nd=function(f,h){var q={x:[],y:[]},m;for(m=1;m<=f;m++)q.x[m]=m+"";for(m=1;m<=h;m++)q.y[m]=b(m);return q}})();
besogo.ia=function(c,b){function f(u){"string"===typeof u&&(n=(u=u.replace(/\s/g," ").trim())||"1",w="label",d({R:w,label:n}))}function h(u,E,F){for(var K=g.children,N=0;N<K.length;N++){var O=K[N].move;if(F){if(q(u,E,K[N]))return!0}else if(O&&O.x===u&&O.y===E)return g=K[N],d({B:!0}),!0}if(g.i)for(K=0;K<g.i.length;K++)if(N=g.i[K],O=N.move,O.x===u&&O.y===E)return N.target.ha=g,g=N.target,d({B:!0}),!0;return F&&q(u,E,e,g)?!0:!1}function q(u,E,F,K){var N,O=F.children;if(K&&K===F)return!1;if((N=F.move)&&
N.x===u&&N.y===E)return g=F,d({B:!0}),!0;for(F=0;F<O.length;F++)if(q(u,E,O[F],K))return!0;return!1}function m(u,E,F,K){if(g.Ba("move")&&g.parent)g.ta(u,E,F,K)&&(g.Sb(),besogo.fa(g.j()),d({G:!0,N:!0}),C=!0);else{var N=g.Da();N.ta(u,E,F,K)&&(g.Rb(N),g=N,d({G:!0,B:!0,N:!0}),C=!0,soundsEnabled&&soundsEnabled2&&document.getElementsByTagName("audio")[0].play(),soundsEnabled2=!1,displayResult("F"))}isMutable=g.Ba("move")}function k(u,E,F){if(g.I(u,E))F=0;else if(!F)return;if(g.Ba("setup"))g.hb(u,E,F)&&d({N:!0});
else{var K=g.Da();K.hb(u,E,F)&&(g.Xa(K),g=K,d({G:!0,B:!0,N:!0}))}}function a(u,E,F){if(F===g.Ma(u,E))if(0!==F)F=0;else return;g.oc(u,E,F)&&("string"===typeof F&&(/^-?\d+$/.test(F)?f(""+(+F+1)):/[A-Za-z]$/.test(F)&&(u=F.charAt(F.length-1),u="z"===u?"A":"Z"===u?"a":String.fromCharCode(u.charCodeAt()+1),f(F.slice(0,F.length-1)+u))),d({Kb:!0}))}function d(u,E){if(u.G||u.N)C=!0;!E&&u.B&&(y=[]);for(var F=0;F<l.length;F++)l[F](u)}var e=besogo.O(c,b),g=e,l=[],r="navOnly auto addB clrMark circle square triangle cross block label".split(" "),
w="auto",n="1",y=[],t={},A="none numeric western eastern pierre corner eastcor".split(" "),I="none",D=0,C=!1,J=!1;return{addListener:function(u){l.push(u)},click:function(u,E,F,K){switch(w){case "navOnly":h(u,E,K);break;case "auto":h(u,E,K)||K||m(u,E,0,F);break;case "addB":F?m(u,E,-1,!0):K?k(u,E,1):k(u,E,-1);break;case "clrMark":a(u,E,0);break;case "circle":a(u,E,1);break;case "square":a(u,E,2);break;case "triangle":a(u,E,3);break;case "cross":a(u,E,4);break;case "block":a(u,E,5);break;case "label":a(u,
E,n)}soundsEnabled&&isMutable&&document.getElementsByTagName("audio")[0].play();"+"==g.J&&(soundsEnabled2=!1,toggleBoardLock(!0),enableReviewButton(),displayResult("S"))},nextNode:function(u){if(0!==g.children.length+g.i.length){for(;0<g.children.length+g.i.length&&0!==u;){if(y.length)g=y.pop();else if(g.children.length)g.children[0].ha=null,g=g.children[0];else{var E=g.i[0].target;E.ha=g;g=E}u--}d({B:!0},!0);soundsEnabled&&soundsEnabled2&&document.getElementsByTagName("audio")[0].play();0==g.K&&
1==g.Oa&&1>g.children.length&&displayResult("F")}},la:function(u){if(g.parent){for(;g.parent&&0!==u;)y.push(g),g=g.ha?g.ha:g.parent,u--;d({B:!0},!0)}},nextSibling:function(u){if(g.parent){var E=g.parent.children;if(1!==E.length){var F=E.indexOf(g);F=(F+u)%E.length;0>F&&(F+=E.length);g=E[F];d({B:!0})}}},Oc:function(){if(null!==g.parent){for(y.push(g);g.parent&&1===g.parent.children.length;)g=g.parent;g.parent?(g=g.parent,d({B:!0})):g=y.pop(g)}},Dd:function(){I=A[(A.indexOf(I)+1)%A.length];d({H:I})},
zb:function(){return I},Uc:function(u){besogo.H[u]&&(I=u,d({H:u}))},Fb:function(){return D},Wb:function(u){if(0===u||1===u||2===u||3===u)D=u,d({Zc:D,Kb:!0})},tc:function(){return t},kb:function(u,E){E?t[E]=u:t=u;d({pd:t})},Tc:function(u){u=u.trim();u=u.replace(/\r\n/g,"\n").replace(/\n\r/g,"\n").replace(/\r/g,"\n");u.replace(/\f\t\v\u0085\u00a0/g," ");g.J=u;d({J:u})},qa:function(){return w},Ga:function(u){return"label"===u&&u===w?(/^-?\d+$/.test(n)?f("A"):f("1"),!0):-1!==r.indexOf(u)&&w!==u?(w=u,
d({R:w,label:n}),!0):!1},Cb:function(){return n},Wc:f,zc:function(){return 2<=D?[]:1===D?g.parent?g.parent.children:[]:g.children},h:function(){return g},jb:function(u){g!==u&&(g=u,d({B:!0}))},xb:function(){var u=g.parent;"navOnly"!==w&&u&&(g.La(),g=u,besogo.fa(g.j()),d({G:!0,B:!0}))},ib:function(){"navOnly"!==w&&g.parent&&g.parent.ib(g)&&d({G:!0})},$a:function(){"navOnly"!==w&&g.parent&&g.parent.$a(g)&&d({G:!0})},j:function(){return e},eb:function(u){g=e=u;d({G:!0,B:!0,N:!0});C=!1},qb:function(){return C},
Tb:function(){C=!1},sa:d,Vb:function(u){J=u},Hb:function(){return J},Y:function(u){e.Y(e,u);e.aa=u.Ka(e.aa);d({G:!0,B:!0,N:!0});C=!0}}};
besogo.Gc=function(c,b){function f(d){var e=document.createElement("input");e.type="button";e.value=d+"x"+d;"?"===d?(e.title="New custom size board",e.onclick=function(){var g=prompt("Enter custom size for new board\n"+(b.qb()?"Everything not saved will be lost":""),"19:19");g&&(g=besogo.gb(g),b.eb(besogo.O(g.x,g.y)),b.kb({}))}):(e.title="New "+d+"x"+d+" board",e.onclick=function(){if(!b.qb()||confirm(e.title+"?\nEverything not saved will be lost"))b.eb(besogo.O(d,d)),b.kb({})});c.appendChild(e)}
function h(){var d=document.createElement("input");d.type="file";d.style.display="none";d.onchange=q;return d}function q(d){d=d.target.files[0];var e=new FileReader,g=h();c.replaceChild(g,k);k=g;e.onload=function(l){try{var r=besogo.Fa(l.target.result)}catch(w){alert("SGF parse error at "+w.at+":\n"+w.message);return}besogo.Ca(r,b)};e.readAsText(d)}function m(d,e){var g=document.createElement("a"),l=new Blob([e],{encoding:"UTF-8",type:"text/plain;charset=UTF-8"});g.download=d;g.href=URL.createObjectURL(l);
g.style.display="none";c.appendChild(g);g.click();c.removeChild(g)}f(9);f(13);f(19);f("?");var k=h();c.appendChild(k);var a=document.createElement("input");a.type="button";a.value="Open";a.title="Import SGF";a.onclick=function(){b.qb()&&!confirm("Changes were made, throw it away?")||k.click()};c.appendChild(a);a=document.createElement("input");a.type="button";a.value="Save";a.title="Export SGF";a.onclick=function(){var d=prompt("Save file as","export");d&&(m(d+".sgf",besogo.za(b)),b.Tb())};c.appendChild(a);
a=document.createElement("input");a.type="button";a.value="Save expanded";a.title="Export SGF export with all virtual variations expanded";a.onclick=function(){var d=b.j().Za();if(d)b.jb(d.node),window.alert(d.message);else if(d=prompt("Save file as","export"))m(d+".sgf",besogo.za(b,!0)),b.Tb()};c.appendChild(a)};
besogo.O=function(c,b){function f(a,d){a.parent=d;a.Z=d?Object.create(d.Z):[];a.children=[];a.i=[];a.move=null;a.ea=[];a.ga=[];a.Jb=[];a.J="";a.hash=0;a.S=!1;a.K=!1;a.ha=null;a.m=null;a.status=null}function h(a,d,e,g,l){var r=[];if(!q(a,d,e,g,r))for(d=0;d<r.length;d++)a.da(r[d].x,r[d].y,0),l.push(r[d])}function q(a,d,e,g,l){if(1>d||1>e||d>c||e>b||a.I(d,e)===g)return!1;if(!a.I(d,e))return!0;for(var r=0;r<l.length;r++)if(l[r].x===d&&l[r].y===e)return!1;l.push({x:d,y:e});return q(a,d-1,e,g,l)||q(a,d+
1,e,g,l)||q(a,d,e-1,g,l)||q(a,d,e+1,g,l)?!0:!1}function m(a){var d=0,e;for(e in a)++d;return d}c=void 0===c?19:c;b=void 0===b?19:b;var k={vb:0,hc:0,Pa:0};f(k,null);k.ma=[];k.L=besogo.Hc();k.M=0;k.status=besogo.v(0);k.aa=-1;k.ta=function(a,d,e,g){e=void 0===e?!1:e;g=void 0===g?!1:g;return this.Ba("move")?this.Nb(a,d,e,g):!1};k.Nb=function(a,d,e,g){e=void 0===e?!1:e;g=void 0===g?!1:g;var l=!1;e||(e=this.ra());if(1>a||1>d||a>c||d>b)return this.move={x:0,y:0,color:e,ya:0,Mb:!1},this.Oa=e,this.Pa++,!0;
var r=this.I(a,d);if(r){if(!g)return!1;l=!0}var w=[],n=[];this.da(a,d,e);h(this,a-1,d,e,w);h(this,a+1,d,e,w);h(this,a,d-1,e,w);h(this,a,d+1,e,w);var y=w.length;var t=this.parent?this.parent.move:null;if(!g&&t&&t.color===-e&&!1===t.Mb&&1===t.ya&&1===y&&!this.I(t.x,t.y)){this.da(a,d,r);for(n=0;n<w.length;++n)this.da(w[n].x,w[n].y,-e);return!1}if(0===y&&(h(this,a,d,-e,n),y=-n.length,0>y&&!g)){this.da(a,d,r);for(a=0;a<w.length;++a)this.da(w[a].x,w[a].y,-e);for(w=0;w<n.length;++w)this.da(n[w].x,n[w].y,
e);return!1}0>e*y?this.vb+=Math.abs(y):this.hc+=Math.abs(y);this.move={x:a,y:d,color:e,ya:y,Mb:l};this.Oa=e;this.Pa++;return!0};k.ra=function(){return this.Oa?-this.Oa:this.j().aa};k.Ea=function(){return-1==this.ra()};k.hb=function(a,d,e){var g=this.parent&&this.parent.I(a,d)||0;if(1>a||1>d||a>c||d>b||!this.Ba("setup")||this.I(a,d)===e)return!1;this.da(a,d,e);this.ea[this.pa(a,d)]=e-g;return!0};k.oc=function(a,d,e){if(1>a||1>d||a>c||d>b||this.Ma(a,d)===e)return!1;this.Jb[this.pa(a,d)]=e;return!0};
k.I=function(a,d){return this.Z[a+"-"+d]||0};k.da=function(a,d,e){this.Z[a+"-"+d]=e};k.yc=function(a,d){if(this.ea[this.pa(a,d)])switch(this.I(a,d)){case 0:return"AE";case -1:return"AB";case 1:return"AW"}else return!1};k.Ma=function(a,d){return this.Jb[this.pa(a,d)]||0};k.getType=function(){if(this.move)return"move";for(var a=0;a<this.ea.length;a++)if(this.ea[a])return"setup";return"empty"};k.ab=function(){return this.K?"green":"red"};k.Ba=function(a){return"move"===a&&"empty"===this.getType()&&0===
this.children.length||"setup"===a&&"move"!==this.getType()?!0:!1};k.qd=function(){return this.parent&&this.parent.children||[]};k.Da=function(){var a=Object.create(this);f(a,this);return a};k.D=function(a,d){var e=this.Da();e.ta(a,d)||console.assert("Move couldn't be played");this.Rb(e);return e};k.Rb=function(a){this.Xa(a);a.Sb();besogo.fa(this.j())};k.Xa=function(a){this.m&&(this.m=null);this.children.push(a);this.S=this.K=!1};k.removeChild=function(a){a=this.children.indexOf(a);if(-1==a)return!1;
this.children.splice(a,1);return!0};k.Rc=function(a){a=this.ga.indexOf(a);-1!=a&&this.ga.splice(a,1)};k.La=function(a,d){a=void 0===a?this.j():a;d=void 0===d?!0:d;for(var e=0;e<this.children.length;++e)this.children[e].La(a,!1);this.children=[];for(e=0;e<this.ga.length;++e)this.ga[e].Qc(this);this.ga=[];for(e=0;e<this.i.length;++e)this.i[e].target.Rc(this);this.i=[];a.L.yb(this);d&&this.parent.removeChild(this)};k.Qc=function(a){for(var d=0;d<this.i.length;++d)if(this.i[d].target==a){this.i.splice(d,
1);break}};k.xc=function(a){for(var d=0;d<this.i.length;++d)if(this.i[d].target==a)return this.i[d].move;return null};k.ib=function(a){var d=this.children.indexOf(a);return 0<d?(this.children[d]=this.children[d-1],this.children[d-1]=a,!0):!1};k.$a=function(a){var d=this.children.indexOf(a);return-1!==d&&d<this.children.length-1?(this.children[d]=this.children[d+1],this.children[d+1]=a,!0):!1};k.getSize=function(){return{x:c,y:b}};k.pa=function(a,d){return(a-1)*b+(d-1)};k.$b=function(a){var d=[];d.y=
a%b+1;d.x=Math.floor(a/b)+1;return d};k.cb=function(){return this.hash?this.hash:this.cc()};k.cc=function(){this.hash=1;for(var a in this.Z){for(var d=this.hash,e=0,g=0,l=a.length;g<l;g++)e=(e<<5)-e+a.charCodeAt(g),e|=0;this.hash=d+e*this.Z[a]}return this.hash};k.bb=function(){if(!this.move||1!=this.move.ya)return null;var a=0,d=null;if(1<this.move.x){var e=this.I(this.move.x-1,this.move.y);e==-this.move.color?++a:0==e&&(d={x:this.move.x-1,y:this.move.y})}else++a;this.move.x<c?(e=this.I(this.move.x+
1,this.move.y),e==-this.move.color?++a:0==e&&(d={x:this.move.x+1,y:this.move.y})):++a;1<this.move.y?(e=this.I(this.move.x,this.move.y-1),e==-this.move.color?++a:0==e&&(d={x:this.move.x,y:this.move.y-1})):++a;this.move.y<b?(e=this.I(this.move.x,this.move.y+1),e==-this.move.color?++a:0==e&&(d={x:this.move.x,y:this.move.y+1})):++a;return 3!=a?null:d};k.Bc=function(a){var d=this.bb();a=a.bb();return d||a?!d&&a||d&&!a?!1:d.x==a.x||d.y==a.y:!0};k.Sc=function(a){var d;if(d=this.Ea()==a.Ea())a:{d=this.Z;
var e=a.Z;if(m(d)!=m(e))d=!1;else{for(var g in d)if(d[g]!=e[g]){d=!1;break a}d=!0}}return d?this.Bc(a):!1};k.ac=function(){for(var a=1,d=0;d<this.children.length;++d)a+=this.children[d].ac();return a};k.j=function(){for(var a=this;a.parent;)a=a.parent;return a};k.Sb=function(){var a=this.j();a.ma[this.pa(this.move.x,this.move.y)]=!0;besogo.Ya(a,this)};k.Vc=function(a,d){a===this.S||0<this.children.length||0<this.i.length||(this.S=a,besogo.fa(this.j()),d.sa({G:!0,B:!0,N:!0}))};k.Za=function(){if(!this.Ea()&&
0==this.children.length&&0==this.i.length&&!this.S)return{node:this,message:"Last black move not marked correct"};for(var a=0;a<this.children.length;++a){var d=this.children[a].Za();if(d)return d}for(a=0;a<this.i.length;++a)if(d=this.i[a].target.Za())return d;return null};k.X=function(a){this.T()||(this.m=a,besogo.fa(this.j()))};k.qc=function(){for(var a=0;a<this.children.length;++a)this.children[a].qc();this.m&&console.assert(!this.T());this.S&&console.assert(!this.T());this.L&&console.assert(null==
this.parent);console.assert(null!=this.status)};k.T=function(){return 0!=this.children.length||0!=this.i.length};k.Ub=function(a){console.assert(null==this.parent);this.M=a;besogo.fa(this)};k.Y=function(a,d){a.L.yb(this);var e=this.ea;this.ea=[];this.Z=this.parent?Object.create(this.parent.Z):[];for(var g=0;g<e.length;++g)if(e[g]){var l=d.apply(this.$b(g),{x:c,y:b});this.hb(l.x,l.y,d.Ka(e[g]))}e=this.move;this.move=null;e&&(g=d.apply(e,{x:c,y:b}),this.Nb(g.x,g.y,d.Ka(e.color)),--this.Pa);this.cc();
a.L.push(this);for(e=0;e<this.children.length;++e)this.children[e].Y(a,d)};k.rc=function(){if(0!=this.children.length)for(var a=0;a<this.children.length;++a)if(this.children[a].move&&this.children[a].move.color){this.aa=this.children[a].move.color;break}};k.Ab=function(){var a=0;this.T()||this.m||++a;for(var d=0;d<this.children.length;++d)a+=this.children[d].Ab();return a};k.Db=function(){if(!this.T()&&!this.m)return this;for(var a=0;a<this.children.length;++a){var d=this.children[a].Db();if(d)return d}return null};
return k};besogo.u("GameRoot","Empty",function(){var c=besogo.O();CHECK_EQUALS(c.children.length,0);CHECK_EQUALS(c.i.length,0);CHECK_EQUALS(c.L.size(),0)});besogo.u("GameRoot","OneMove",function(){var c=besogo.O();c.D(5,5);CHECK_EQUALS(c.children.length,1);CHECK_EQUALS(c.children.length,1);CHECK_EQUALS(c.i.length,0);CHECK_EQUALS(c.L.size(),1)});
besogo.u("GameRoot","RemoveOneChild",function(){var c=besogo.O();c.D(5,5).La();CHECK_EQUALS(c.children.length,0);CHECK_EQUALS(c.i.length,0);CHECK_EQUALS(c.L.size(),0)});besogo.u("GameRoot","RemoveVariation",function(){var c=besogo.O(),b=c.D(5,5);CHECK_EQUALS(c.L.size(),1);b.D(6,6);CHECK(b.T());CHECK_EQUALS(c.children.length,1);CHECK_EQUALS(b.children.length,1);CHECK_EQUALS(c.L.size(),2);b.La();CHECK_EQUALS(c.children.length,0);CHECK_EQUALS(c.L.size(),0)});
besogo.u("GameRoot","TwoOrderOfMovesLeadToTheSameNode",function(){var c=besogo.O(),b=c.D(1,1).D(1,2).D(2,1).D(2,2);c=c.D(2,1).D(2,2).D(1,1);CHECK_EQUALS(c.i.length,1);CHECK(c.i[0].target==b);CHECK_EQUALS(b.ga.length,1);CHECK(b.ga[0]==c)});
besogo.Ca=function(c,b){function f(d,e){var g;for(g=0;g<d.ua.length;g++){var l=e;var r=d.ua[g];switch(r.id){case "B":r=q(r.values[0]);l.ta(r.x,r.y,-1,!0);break;case "W":r=q(r.values[0]);l.ta(r.x,r.y,1,!0);break;case "AB":h(r.values,l,"placeSetup",-1);break;case "AW":h(r.values,l,"placeSetup",1);break;case "AE":h(r.values,l,"placeSetup",0);break;case "CR":h(r.values,l,"addMarkup",1);break;case "SQ":h(r.values,l,"addMarkup",2);break;case "TR":h(r.values,l,"addMarkup",3);break;case "M":case "MA":h(r.values,
l,"addMarkup",4);break;case "SL":h(r.values,l,"addMarkup",5);break;case "L":case "LB":h(r.values,l,"addMarkup","label");break;case "C":l.J=l.J?l.J+("\n"+r.values.join().trim()):r.values.join().trim();break;case "S":l.m=besogo.$(r.values.join().trim());break;case "G":l.M=besogo.Cc(r.values.join().trim())}}for(g=0;g<d.children.length;g++)l=e.Da(),e.Xa(l),f(d.children[g],l)}function h(d,e,g,l){var r,w;for(r=0;r<d.length;r++){var n=q(d[r].slice(0,2));if("label"===l){var y=d[r].slice(3).replace(/\n/g,
" ");e[g](n.x,n.y,y)}else if(":"===d[r].charAt(2)){var t=q(d[r].slice(3));if(t.x===n.x&&t.y===n.y)e[g](n.x,n.y,l);else if(t.x<n.x||t.y<n.y)e[g](n.x,n.y,l),e[g](t.x,t.y,l);else for(y=n.x;y<=t.x;y++)for(w=n.y;w<=t.y;w++)e[g](y,w,l)}else e[g](n.x,n.y,l)}}function q(d){return d.match(/^[A-Za-z]{2}$/)?{x:m(d.charAt(0)),y:m(d.charAt(1))}:{x:0,y:0}}function m(d){return d.match(/[A-Z]/)?d.charCodeAt(0)-65+27:d.charCodeAt(0)-97+1}var k={x:19,y:19};(function(d){var e="PB BR BT PW WR WT HA KM RU TM OT DT EV GN PC RO GC ON RE AN CP SO US".split(" "),
g={},l;for(l=0;l<d.ua.length;l++){var r=d.ua[l].id;var w=d.ua[l].values.join().trim();"SZ"===r?k=besogo.gb(w):"ST"===r?b.Wb(+w):-1!==e.indexOf(r)&&("GC"!==r&&(w=w.replace(/\n/g," ")),w&&(g[r]=w))}b.kb(g)})(c);var a=besogo.O(k.x,k.y);f(c,a);a.rc();besogo.Yc(a);b.eb(a)};
besogo.Hc=function(){var c=[];c.table=[];c.push=function(b){var f=b.cb();this.table[f]||(this.table[f]=[]);this.table[f].push(b)};c.yb=function(b){var f=b.cb();f=this.table[f];if(!f)throw Error("Node to be removed not found.");for(var h=0;h<f.length;++h)if(f[h]==b){f.splice(h,1);return}throw Error("Node to be removed not found.");};c.Eb=function(b){var f=b.cb();f=this.table[f];if(!f)return null;for(var h=0;h<f.length;++h)if(b.Sc(f[h]))return f[h];return null};c.size=function(){var b=0,f;for(f in this.table)b+=
this.table[f].length;return b};return c};
besogo.Fa=function(c){function b(e){throw{name:"Syntax Error",message:e,at:a,text:c};}function f(e){e&&e!==d&&b("Expected '"+e+"' instead of '"+d+"'");a++;return d=c.charAt(a)}function h(){for(;d&&" ">=d;)f()}function q(){return"\n"===d?("\r"===c.charAt(a+1)&&f(),!0):"\r"===d?("\n"===c.charAt(a+1)&&f(),!0):!1}function m(){var e;f("(");h();";"!==d&&b("Sub-tree missing root");var g=k();h();for(e=g;";"===d;){var l=k();e.children.push(l);e=l;h()}for(;"("===d;)l=m(),e.children.push(l),h();f(")");return g}
function k(){var e,g={ua:[],children:[]};f(";");for(h();d&&";"!==d&&"("!==d&&")"!==d;){for(e={id:"",values:[]};d&&/[A-Za-z]/.test(d);)/[A-Z]/.test(d)&&(e.id+=d),f();e.id||b("Missing property ID");for(h();"["===d;){var l=e.values,r=l.push,w="";for(f("[");d&&"]"!==d;)"\\"===d?(f("\\"),q()||(w=" ">=d?w+" ":w+d)):w=q()?w+"\n":" ">=d?w+" ":w+d,f();f("]");r.call(l,w);h()}0===e.values.length&&b("Missing property values");g.ua.push(e);h()}return g}for(var a=0,d=c.charAt(a);d&&"("!==d;)f();return m()};
besogo.za=function(c,b){function f(k,a,d,e){e=void 0===e?null:e;var g=";",l=a.children;if(!a.parent){var r="FF[4]GM[1]CA[UTF-8]AP[besogo:"+besogo.VERSION+"]",w=a.getSize().x,n=a.getSize().y,y=c.tc(),t=!1;r=(w===n?r+("SZ["+w+"]"):r+("SZ["+w+":"+n+"]"))+("ST["+c.Fb()+"]\n");for(A in y)y.hasOwnProperty(A)&&y[A]&&(r+=A+"["+q(y[A])+"]",t=!0);g+=r+(t?"\n":"")}var A=g;g=e;e="";if("move"===a.getType())g=g?g:a.move,e+=1===g.color?"W":"B",e+="["+m(g.x,g.y)+"]";else if("setup"===a.getType()){g={$c:[],bd:[],
ad:[]};for(w=1;w<=a.getSize().x;w++)for(n=1;n<=a.getSize().y;n++)(r=a.yc(w,n))&&g[r].push({x:w,y:n});e+=h(g)}g={cd:[],gd:[],hd:[],ed:[],fd:[],lc:[]};for(w=1;w<=a.getSize().x;w++)for(n=1;n<=a.getSize().y;n++)if(r=a.Ma(w,n))"string"===typeof r?g.lc.push({x:w,y:n,label:r}):(r=["CR","SQ","TR","MA","SL"][r-1],g[r].push({x:w,y:n}));e+=h(g);g=0==k.M?a.S:!a.T()&&a.K;if(a.J||g)e=e+(e?"\n":"")+("C["+q((g?"+":"")+a.J)+"]");a.m&&(e=e+(e?"\n":"")+("S["+a.m.s()+"]"));null==a.parent&&0!=a.M&&(e=e+(e?"\n":"")+("G["+
besogo.Ac(a.M)+"]"));g=A+e;if(1!==l.length||d&&0!=a.i.length){for(e=0;e<l.length;e++)g+="\n("+f(k,l[e],d)+")";if(d&&(a.Ea()||0==a.children.length))for(e=0;e<a.i.length;e++)if(a.K||!a.i[e].target.K)g+="\n("+f(k,a.i[e].target,d,a.i[e].move)+")"}else g+="\n"+f(k,l[0],d);return g}function h(k){var a="",d,e;for(d in k)if(k.hasOwnProperty(d)){var g=k[d];if(0<g.length)for(a+=d,e=0;e<g.length;e++)a+="["+m(g[e].x,g[e].y),g[e].label&&(a+=":"+q(g[e].label)),a+="]"}return a}function q(k){k=k.replace(/\\/g,"\\\\");
return k.replace(/\]/g,"\\]")}function m(k,a){return 0===k||0===a?"":(26<k?String.fromCharCode(65+k-27):String.fromCharCode(97+k-1))+(26<a?String.fromCharCode(65+a-27):String.fromCharCode(97+a-1))}return"("+f(c.j(),c.j(),void 0===b?!1:b)+")"};
besogo.ba=function(c){var b=[];b.type=c;3==c&&(b.ca=!1);b.s=function(){if(1==this.type)return"DEAD";if(2==this.type)return result=this.vc()+"KO"+this.Bb();if(3==this.type)return"SEKI"+(this.ca?"+":"");if(4==this.type)return"ALIVE"};b.sc=function(){return this.A?this.A:0};b.Qa=function(){return 2==this.type?result=this.s()+" ("+this.uc()+this.wc()+")":3==this.type?this.s()+(this.ca?" in sente":" in gote"):this.s()};b.vc=function(){console.assert(2==this.type);if(!this.A||0==this.A)return"";var f="";
f=0<this.A?f+"A+":f+"A-";0<this.A?f+=this.A:0>this.A&&(f+=-this.A);return f};b.Bb=function(){console.assert(2==this.type);var f="";f=!this.o||0<=this.o?f+"+":f+"-";0<this.o?f+=this.o+1:-1>this.o&&(f+=-this.o);return f};b.uc=function(){console.assert(2==this.type);if(!this.A||0==this.A)return"";if(0<this.A)return"White needs to do "+this.A+" approach move"+(1<this.A?"s":"")+" to start a direct ko, ";if(0>this.A)return"Black needs to do "+-this.A+" approach move"+(-1>this.A?"s":"")+" to start a direct ko, "};
b.wc=function(){console.assert(2==this.type);if(!this.o||0==this.o)return"Black takes first";if(-1==this.o)return"White takes first";if(0<this.o)return"White needs "+this.o+" threat"+(1<this.o?"s":"")+" to start the ko";if(0>this.o)return"Black needs "+(-this.o-1)+" threat"+(-2>this.o?"s":"")+" to start the ko"};b.na=function(f){this.type=2;this.o=f};b.W=function(f,h){this.type=2;this.A=f;this.o=void 0===h?0:h};b.va=function(f){this.type=3;this.ca=f};b.F=function(f,h){return this.type!=f.type?1==
h?this.type<f.type:this.type>f.type:2==this.type?this.A!=f.A?this.A>f.A:this.o>f.o:3==this.type?this.ca&&!f.ca:!1};return b};besogo.v=function(c){return besogo.V(besogo.ba(c))};besogo.$=function(c){var b=c.split("/");return 1==b.length?besogo.V(besogo.fb(c)):besogo.V(besogo.fb(b[0]),besogo.fb(b[1]))};besogo.Cc=function(c){return"KILL"==c?1:"LIVE"==c?2:0};besogo.Ac=function(c){return 1==c?"KILL":2==c?"LIVE":""};
besogo.fb=function(c){if("DEAD"==c)return besogo.ba(1);if("SEKI"==c)return besogo.ba(3);if("SEKI+"==c)return c=besogo.ba(3),c.va(!0),c;if("ALIVE"==c)return besogo.ba(4);var b=0;if("A"==c[0]&&("+"==c[1]||"-"==c[1])){for(var f=2;!isNaN(parseInt(c[f]));)b*=10,b+=parseInt(c[f]),++f;"-"==c[1]&&(b=-b);c=c.substr(f,c.length-f)}if(2<=c.length&&"K"==c[0]&&"O"==c[1]){f=besogo.ba(2);f.A=b;if(2==c.length)return f;if("+"==c[2]){if(3==c.length)return f.o=0,f;f.o=Number(c.substr(3,c.length-3))-1;return f}if("-"==
c[2]){if(3==c.length)return f.o=-1,f;f.o=-Number(c.substr(3,c.length-3));return f}}};
besogo.V=function(c,b){c=void 0===c?null:c;b=void 0===b?null:b;var f=[];f.l=c?c:besogo.ba(0);f.Ta=b?b:besogo.ba(4);f.s=function(){var h="";4!=this.Ta.type&&(h+=this.Ta.s(),h+="/");return h+=this.l.s()};f.Qa=function(){var h="";4!=this.Ta.type&&(h+=this.Ta.Qa(),h+="/");return h+=this.l.Qa()};f.F=function(h,q){return 0==this.l.type?!1:this.l.F(h.l,void 0===q?1:q)};f.na=function(h){this.l.na(h)};f.W=function(h,q){this.l.W(h,void 0===q?0:q)};f.va=function(h){this.l.va(h)};return f};
besogo.u("Status","None",function(){CHECK_EQUALS(besogo.v(0).l.type,0)});besogo.u("Status","StatusKoThreatsSimple",function(){var c=besogo.V();c.na(0);CHECK_EQUALS(c.s(),"KO+");var b=besogo.V();b.na(-1);CHECK_EQUALS(b.s(),"KO-");CHECK(c.F(b,1));CHECK(!b.F(c,1));CHECK(c.F(b,2));CHECK(!b.F(c,2))});besogo.u("Status","StatusKoThreatsHigher",function(){var c=besogo.V();c.na(1);CHECK_EQUALS(c.s(),"KO+2");var b=besogo.V();b.na(0);CHECK_EQUALS(b.s(),"KO+");CHECK(c.F(b));CHECK(!b.F(c))});
besogo.u("Status","StatusKoThreatsSaveLoad",function(){for(var c=-3;4>c;++c){var b=besogo.V();b.na(c);b=b.s();b=besogo.$(b);CHECK_EQUALS(b.l.o,c)}});besogo.u("Status","SaveLoadKo",function(){var c=besogo.v(2),b=c.s();besogo.$(b);CHECK_EQUALS(c.l.type,2)});besogo.u("Status","DeadBetterThanko",function(){var c=besogo.v(1),b=besogo.v(2);CHECK(c.F(b,1));CHECK(!b.F(c,1));CHECK(!c.F(b,2));CHECK(b.F(c,2))});besogo.u("Status","ApproachKoGood",function(){var c=besogo.v(2);c.W(1);CHECK_EQUALS(c.s(),"A+1KO+")});
besogo.u("Status","ApproachKoBad",function(){var c=besogo.v(2);c.W(-1);CHECK_EQUALS(c.s(),"A-1KO+")});besogo.u("Status","ApproachKoGoodBetterThanApproachKoBad",function(){var c=besogo.v(2);c.W(-1);var b=besogo.v(2);b.W(1);CHECK(b.F(c));CHECK(!c.F(b))});besogo.u("Status","SaveLoadApproachKo",function(){var c=besogo.v(2);c.W(-1);CHECK_EQUALS(c.s(),"A-1KO+");c=besogo.$(c.s());CHECK_EQUALS(c.s(),"A-1KO+");CHECK_EQUALS(c.l.A,-1);CHECK_EQUALS(c.l.o,0)});
besogo.u("Status","SaveLoadApproachKoWithNegativeExtraThreats",function(){var c=besogo.v(2);c.W(-1,-1);CHECK_EQUALS(c.s(),"A-1KO-");c=besogo.$(c.s());CHECK_EQUALS(c.s(),"A-1KO-");CHECK_EQUALS(c.l.A,-1);CHECK_EQUALS(c.l.o,-1)});besogo.u("Status","StatusSekiSimple",function(){var c=besogo.V();c.va(!1);CHECK_EQUALS(c.s(),"SEKI");var b=besogo.V();b.va(!0);CHECK_EQUALS(b.s(),"SEKI+");CHECK(!c.F(b));CHECK(b.F(c))});
besogo.u("Status","SaveLoadSeki",function(){var c=besogo.v(3),b=c.s();besogo.$(b);CHECK_EQUALS(c.l.type,3);CHECK(!c.l.ca)});besogo.u("Status","SaveLoadSeki+",function(){var c=besogo.v(3);c.va(!0);var b=c.s();CHECK("SEKI+"==b);besogo.$(b);CHECK_EQUALS(c.l.type,3);CHECK(c.l.ca)});
besogo.u("Status","InitStatusOnLoadWithoutNone",function(){var c=besogo.ia();c.j().D(1,1).X(besogo.v(1));c.j().D(2,1).X(besogo.v(2));CHECK_EQUALS(c.j().children.length,2);var b=besogo.ia();besogo.Ca(besogo.Fa(besogo.za(c)),b);CHECK_EQUALS(b.j().children.length,2)});
besogo.u("Status","InitStatusOnLoad",function(){var c=besogo.ia();c.j().D(1,1).X(besogo.v(1));c.j().D(2,1).X(besogo.v(2));c.j().D(3,1);CHECK_EQUALS(c.j().children.length,3);var b=besogo.ia();besogo.Ca(besogo.Fa(besogo.za(c)),b);CHECK_EQUALS(b.j().children.length,3)});besogo.u("Status","SetStatusSourceOnNonLeaf",function(){var c=besogo.O().D(5,5);c.D(6,6);CHECK(c.T());CHECK(null==c.m);c.X(besogo.v(1));CHECK(null==c.m)});
besogo.u("Status","AddChildToNodeWithStatusSource",function(){var c=besogo.O().D(5,5);CHECK(!c.m);c.X(besogo.v(1));CHECK(c.m);c.D(6,6);CHECK(!c.m)});besogo.u("Status","LoadingSgfWithStatusSourceNotOnLeafGetsFixed",function(){var c=besogo.ia(),b=c.j().D(5,5);b.D(6,6);b.m=besogo.v(1);b=besogo.ia();besogo.Ca(besogo.Fa(besogo.za(c)),b);CHECK_EQUALS(b.j().children.length,1);CHECK(null==b.j().children[0].m)});besogo.u("Status","EmptyGameRootHasStatus",function(){var c=besogo.O();CHECK(c.status)});
besogo.RED="#be0119";besogo.dd="#ff474c";besogo.ic="#0165fc";besogo.mc="#9a0eea";besogo.xa="#929591";besogo.kc="#dbb40c";besogo.nc="#06c2ac";besogo.rb=4;besogo.tb=11;besogo.g=function(c,b){var f,h=document.createElementNS("http://www.w3.org/2000/svg",c);for(f in b||{})b.hasOwnProperty(f)&&h.setAttribute(f,b[f]);return h};besogo.Xc=function(){var c=besogo.g("g"),b=besogo.g("filter",{id:"blur"}),f=besogo.g("feGaussianBlur",{rd:"SourceGraphic",Bd:"2"});b.appendChild(f);c.appendChild(b);return c};
besogo.Yb=function(c,b){return besogo.g("circle",{cx:c,cy:b,r:43,stroke:"none",fill:"black",opacity:.32,filter:"url(#blur)"})};besogo.Pc=function(c,b,f,h){f=0>f?"black"+h%besogo.rb:"white"+h%besogo.tb;f="/besogo/img/"+f+".png";c=besogo.g("image",{x:c-44,y:b-44,height:88,width:88});c.setAttributeNS("http://www.w3.org/1999/xlink","href",f);return c};
besogo.U=function(c,b,f,h){var q="besogo-svg-greyStone";-1===f?q="besogo-svg-blackStone":1===f&&(q="besogo-svg-whiteStone");return besogo.g("circle",{cx:c,cy:b,r:void 0===h?42:h,"class":q})};besogo.Ha=function(c,b,f,h,q){return besogo.g("circle",{cx:c,cy:b,r:void 0===h?27:h,stroke:f,"stroke-width":void 0===q?8:q,fill:"none"})};besogo.Xb=function(c,b,f,h){return besogo.g("circle",{cx:c,cy:b,r:void 0===h?27:h,fill:f})};
besogo.Ra=function(c,b,f,h){return besogo.g("rect",{x:c-23,y:b-23,width:46,height:46,stroke:f,"stroke-width":void 0===h?8:h,fill:"none"})};besogo.Sa=function(c,b,f){return besogo.g("polygon",{points:""+c+","+(b-30)+" "+(c-26)+","+(b+15)+" "+(c+26)+","+(b+15),stroke:f,"stroke-width":8,fill:"none"})};besogo.Ia=function(c,b,f){return besogo.g("path",{d:"m"+(c-24)+","+(b-24)+"l48,48m0,-48l-48,48",stroke:f,"stroke-width":8,fill:"none"})};
besogo.nb=function(c,b,f){return besogo.g("path",{d:"m"+c+","+(b-28)+"v56m-28,-28h56",stroke:f,"stroke-width":8,fill:"none"})};besogo.mb=function(c,b,f){return besogo.g("rect",{x:c-18,y:b-18,width:36,height:36,stroke:"none","stroke-width":8,fill:f})};
besogo.Ja=function(c,b,f,h,q){q=void 0===q?null:q;6<h.length&&(h=h.slice(0,2)+"\u2026");if(!q)switch(h.length){case 1:q=72;break;case 2:q=56;break;case 3:q=36;break;default:q=20}c=besogo.g("text",{x:c,y:b,dy:".65ex","font-size":q,"text-anchor":"middle","font-family":"Helvetica, Arial, sans-serif",fill:f});c.appendChild(document.createTextNode(h));return c};besogo.u=function(c,b,f){null==besogo.Zb&&(besogo.Zb=[]);var h=[];h.name=b;h.Cd=c;h.method=f;besogo.Zb.push(h)};
CHECK=function(c){if(!c)throw c=[],c.message="Check failed",c.stack=console.trace(),c;};CHECK_EQUALS=function(c,b){if(c!=b){var f=[];f.message="Expected "+b+" but was "+c;f.stack=console.trace();throw f;}};
besogo.Ib=function(c,b){function f(l,r){var w=document.createElement("button"),n=besogo.g("svg",{width:"100%",height:"100%",viewBox:"-55 -55 110 110"}),y=besogo.g("rect",{x:-50,y:-50,width:100,height:100,fill:"none","stroke-width":8,stroke:besogo.kc,rx:20,ry:20,visibility:"hidden"});c.appendChild(w);w.appendChild(n);w.onclick=function(){"auto"===l&&"auto"===b.qa()?b.Ga("navOnly"):b.Ga(l)};w.title=r;k[l]=y;n.appendChild(y);return n}function h(l,r,w){var n=document.createElement("input");n.type="button";
n.value=l;n.title=r;n.onclick=w;c.appendChild(n)}function q(l){l.label&&(g.value=l.label);if(l.R)for(var r in k)k.hasOwnProperty(r)&&(l.R===r?k[r].setAttribute("visibility","visible"):k[r].setAttribute("visibility","hidden"))}function m(l,r){var w=besogo.g("g");w.appendChild(besogo.g("path",{d:"m"+l+","+(r-44)+" a44 44 0 0 1 0,88z",stroke:"none",fill:"black"}));w.appendChild(besogo.g("path",{d:"m"+l+","+(r+44)+"a44 44 0 0 1 0,-88a22 22 0 0 1 0,44z",stroke:"none",fill:"white"}));w.appendChild(besogo.g("circle",
{cx:l,cy:r+22,r:22,stroke:"none",fill:"black"}));return w}var k={},a=!1;console.log(c);if("besogo-tool2"!==c.className){var d=f("auto","Auto-play/navigate\ncrtl+click to force ko, suicide, overwrite\nshift+click to jump to move");d.appendChild(m(0,0));d=f("addB","Set black\nshift+click addWhite\nctrl+click to play");var e=besogo.g("g");e.appendChild(besogo.U(-15,-15,-1,15));e.appendChild(besogo.U(15,-15,1,15));e.appendChild(besogo.U(-15,15,1,15));e.appendChild(besogo.U(15,15,-1,15));d.appendChild(e);
d=f("circle","Circle");d.appendChild(besogo.Ha(0,0,"black"));d=f("square","Square");d.appendChild(besogo.Ra(0,0,"black"));d=f("triangle","Triangle");d.appendChild(besogo.Sa(0,0,"black"));d=f("cross","Cross");d.appendChild(besogo.Ia(0,0,"black"));d=f("block","Block");d.appendChild(besogo.mb(0,0,"black"));d=f("clrMark","Clear mark");e=besogo.g("g");e.appendChild(besogo.Sa(0,0,besogo.xa));e.appendChild(besogo.Ia(0,0,besogo.RED));d.appendChild(e);d=f("label","Label");d.appendChild(besogo.Ja(0,0,"black",
"A1"));var g=document.createElement("input");g.type="text";g.title="Next label";g.onblur=function(){b.Wc(g.value)};g.addEventListener("keydown",function(l){l=l||window.event;l.stopPropagation()});c.appendChild(g);h("Pass","Pass move",function(){var l=b.qa();"navOnly"!==l&&"auto"!==l&&b.Ga("auto");b.click(0,0,!1)});h("Raise","Raise variation",function(){b.ib()});h("Lower","Lower variation",function(){b.$a()});h("Cut","Remove branch",function(){b.xb()});h("H Flip","Flip horizontally",function(){var l=
besogo.ja();l.Gb=!0;b.Y(l)});h("V Flip","Flip vertically",function(){var l=besogo.ja();l.ec=!0;b.Y(l)});h("Rotate","Rotate the board clockwise",function(){var l=besogo.ja();l.rotate=!0;b.Y(l)});h("Invert","Invert colors of all stones and moves.",function(){var l=besogo.ja();l.Na=!0;b.Y(l)});h("Invert firstMove","Invert the color of the first move",function(){var l=besogo.ja();l.Na=!0;b.j().aa=l.Ka(b.j().aa);b.sa({G:!0,B:!0,N:!0});b.od=!0})}else h("Invert","Invert colors of all stones and moves.",
function(){var l=besogo.ja();l.Na=!0;b.Y(l)}),h("Rotate","Rotate the board clockwise",function(){var l=besogo.ja();l.rotate=!0;b.Y(l)}),h("Back","Previous problem",function(){window.location.href="/tsumegos/play/"+prevButtonLink}),h("Reset","Resets the problem",function(){b.la(-1);toggleBoardLock(!1);reviewEnabled2=!1;document.getElementById("status").innerHTML="";document.getElementById("theComment").style.cssText="display:none;";$(".besogo-panels").Aa("display","none");$(".besogo-board").Aa("margin",
"0 315px")}),h("Next","Next problem",function(){window.location.href="/tsumegos/play/"+nextButtonLink}),h("Review","Review mode",function(){reviewEnabled&&(a?($(".besogo-panels").Aa("display","none"),$(".besogo-board").Aa("margin","0 315px"),deleteNextMoveGroup=!1):($(".besogo-panels").Aa("display","flex"),$(".besogo-board").Aa("margin","0"),toggleBoardLock(!1),deleteNextMoveGroup=!0),a=!a,reviewEnabled2=!reviewEnabled2,b.sa({G:!0,B:!0,N:!0}))});b.addListener(q);q({label:b.Cb(),R:b.qa(),oa:b.qa()})};
besogo.ja=function(){var c=[];c.Gb=!1;c.ec=!1;c.rotate=!1;c.Na=!1;c.apply=function(b,f){var h=[];h.x=b.x;h.y=b.y;this.Gb&&(h.x=f.x-b.x+1);this.ec&&(h.y=f.y-b.y+1);if(this.rotate){var q=[f.x-h.y+1,h.x];var m="undefined"!=typeof Symbol&&Symbol.iterator&&q[Symbol.iterator];if(m)q=m.call(q);else if("number"==typeof q.length)q={next:U(q)};else throw Error(String(q)+" is not an iterable or ArrayLike");h.x=q.next().value;h.y=q.next().value}return h};c.Ka=function(b){return this.Na?-b:b};return c};
besogo.Ic=function(c,b){function f(n){var y=c.clientWidth,t=c.clientHeight,A=c.scrollTop,I=c.scrollLeft,D=.25*(n.getAttribute("x")-5),C=.25*(n.getAttribute("y")-5);D<I?c.scrollLeft=D:D+30>I+y&&(c.scrollLeft=D+30-y);C<A?c.scrollTop=C:C+30>A+t&&(c.scrollTop=C+30-t);n.setAttribute("opacity",1);n.onmouseover=null;n.onmouseout=null;r.appendChild(n);w=n}function h(n){n.setAttribute("opacity",0);n.onmouseover=function(){n.setAttribute("opacity",.5)};n.onmouseout=function(){n.setAttribute("opacity",0)};g.appendChild(n)}
function q(){var n=b.h(),y=b.j(),t=[],A=g,I=besogo.g("rect",{height:"100%",width:"100%","class":"besogo-svg-board besogo-svg-backer"});g=besogo.g("svg");r=besogo.g("g");l=besogo.g("g");g.appendChild(I);g.appendChild(r);g.appendChild(l);y=m(y,0,0,t);l.appendChild(e(y,"black"));y=120*t.length;t=120*Math.max.apply(Math,t);g.setAttribute("viewBox","0 0 "+y+" "+t);g.setAttribute("height",.25*t);g.setAttribute("width",.25*y);A?c.replaceChild(g,A):c.appendChild(g);f(n.Lb)}function m(n,y,t,A){var I=n.children,
D;if(0===I.length)var C="m"+(120*y+60)+","+(120*t+60);else{var J=A[y+1]||0;J=J<t?t:J;t<J-1&&(t=J-1);C=m(I[0],y+1,J,A)+d(y,t,A);for(D=1;D<I.length;D++)J=A[y+1],J=m(I[D],y+1,J,A)+d(y,t,A,J-1),l.appendChild(e(J,"black"))}g.appendChild(k(n,y,t));a(n,y,t);A[y]=t+1;return C}function k(n,y,t){switch(n.getType()){case "move":var A=n.move.color;var I=besogo.g("g");I.appendChild(besogo.U(120*y+60,120*t+60,A));A=-1===A?"white":"black";n.i.length?I.appendChild(besogo.nb(120*y+60,120*t+60,A)):I.appendChild(besogo.Ja(120*
y+60,120*t+60,A,""+n.Pa));I.appendChild(besogo.Ha(120*y+60,120*t+60,n.ab(),50));break;case "setup":I=besogo.g("g");I.appendChild(besogo.U(120*y+60,120*t+60));I.appendChild(besogo.nb(120*y+60,120*t+60,besogo.RED));break;default:I=besogo.U(120*y+60,120*t+60)}n.Lc=I;n.Mc=y;n.Nc=t;return I}function a(n,y,t){y=besogo.g("rect",{x:120*y+60-55,y:120*t+60-55,width:110,height:110,fill:besogo.nc});y.onclick=function(){b.jb(n)};n.Lb=y;h(y)}function d(n,y,t,A){n=t[n+1]-1;return n===y?"h-120":n===y+1?"l-120,-120":
A&&A!==y?"l-60,-60v-"+120*(n-A):"l-60,-60v-"+120*(n-y-1)+"l-60,-60"}function e(n,y){return besogo.g("path",{d:n,stroke:y,"stroke-width":8,fill:"none"})}var g,l,r,w;q();b.addListener(function(n){if(n.G)q();else if(n.B)n=b.h(),h(w),f(n.Lb);else if(n.N){var y=b.h();n=y.Lc;y=k(y,y.Mc,y.Nc);g.replaceChild(y,n)}})};besogo.Yc=function(c){c.Pb=0;besogo.Ob(c,c);besogo.ub(c,c);for(var b=0,f=0;f<c.ma.length;++f)c.ma[f]&&++b;besogo.Ya(c,c,!1);besogo.fa(c)};
besogo.ub=function(c,b){for(var f=0;f<b.ea.length;++f)b.ea[f]&&(c.ma[f]=!0);b.move&&(c.ma[c.pa(b.move.x,b.move.y)]=!0);for(f=0;f<b.children.length;++f)besogo.ub(c,b.children[f])};
besogo.Ya=function(c,b,f){(f=void 0===f?!0:f)&&c.L.push(b);c.getSize();c.getSize();for(var h=0;h<c.ma.length;++h)if(c.ma[h]){var q=c.$b(h);if(!b.I(q.x,q.y)){var m=b.Da();if(m.ta(q.x,q.y)){var k=c.L.Eb(m);if(k&&k.parent!=b){var a=[];a.target=k;a.move=[];a.move.x=q.x;a.move.y=q.y;a.move.ya=m.move.ya;a.move.color=b.ra();b.i.push(a);a.target.ga.push(b);b.S=!1}}else b.removeChild(m)}}for(h=0;h<b.children.length;++h)besogo.Ya(c,b.children[h],f)};
besogo.Ob=function(c,b){c.L.push(b);for(var f=0;f<b.children.length;){var h=b.children[f];c.L.Eb(h)?(c.Pb+=h.ac(),b.removeChild(h)):(besogo.Ob(c,h),++f)}};besogo.wb=function(c){delete c.K;c.status=null;c.T()&&(c.m=null);for(var b=0;b<c.children.length;++b)besogo.wb(c.children[b])};besogo.fa=function(c){besogo.wb(c);besogo.pb(c,c,c.M);0==c.M?besogo.ob(c,c):besogo.bc(c,c.M,c.status,!0)};besogo.dc=function(c,b,f,h){return b.status.F(f,h)==c?b.status:f};
besogo.pb=function(c,b,f){if(b.m)console.assert(!b.T()),b.status=b.m;else if(!b.status){for(var h=0;h<b.children.length;++h)besogo.pb(c,b.children[h],f);for(h=0;h<b.i.length;++h)besogo.pb(c,b.i[h].target,f);c=b.ra()==c.aa;b.status=c==(1==f)?besogo.v(5):besogo.v(0);for(h=0;h<b.children.length;++h)b.status=besogo.dc(c,b.children[h],b.status,f);for(h=0;h<b.i.length;++h)b.status=besogo.dc(c,b.i[h].target,b.status,f);5==b.status.l.type&&(b.status=besogo.v(0))}};
besogo.ob=function(c,b){if(b.J.startsWith("+"))return b.S||(b.S=!0),b.K=!0;if(b.S)return b.K=!0;if(b.hasOwnProperty("correct"))return b.K;for(var f=!1,h=!1,q=0;q<b.children.length;++q)besogo.ob(c,b.children[q])?h=!0:f=!0;for(q=0;q<b.i.length;++q)besogo.ob(c,b.i[q].target)?h=!0:f=!0;b.K=b.ra()==c.aa?h:h&&!f;return b.K};besogo.bc=function(c,b,f,h){if(!c.hasOwnProperty("correct"))for(c.K=h&&!f.F(c.status,b),f=0;f<c.children.length;++f)besogo.bc(c.children[f],b,c.status,c.K)};
©2009 Google - Terms of Service - Privacy Policy - Google Home